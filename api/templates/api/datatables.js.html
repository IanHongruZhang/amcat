<script>
    require(["jquery", "amcat/amcat.datatables"], function($){
        amcat.datatables.create_rest_table($("#{{ id }}-wrapper"), "{{ url|safe }}", {
            "setup_callback" : function(tbl){
                // Setup clickable (redirecting) rows
                {% if rowlink %}
                    tbl.fnSetRowlink("{{ rowlink }}", "{{ rowlink_open_in }}");
                {% endif %}
                console.log("{{ rowlink }}");

                // Setup checkboxes for selecting rows.
                {% if checkboxes %}
                    tbl.fnRowCheckbox();
                {% endif %}

                // Consider table actions
                tbl.fnTableActions($("#{{ id }}-actions"));
            },
            "name" : "{{ id }}",
            "datatables_options" : {{ options|safe }}
        });

        $("#{{ id }}-wrapper").data("url", "{{ url|safe }}").addClass("amcat-table-wrapper");
        $("#{{ id }}-wrapper").data("allow_export_via_post", "{{ allow_export_via_post|safe }}").addClass("amcat-table-wrapper");
    });
</script>
